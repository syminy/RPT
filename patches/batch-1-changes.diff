--- Diff: app.js (backup vs current) ---
--- backups/frontend/app.js.bak.20251109_060633	2025-11-09 14:02:24.299267258 +0800
+++ webui/static/app.js	2025-11-09 14:06:33.414711703 +0800
@@ -5200,7 +5200,7 @@
 
 function setupRefreshButton() {
     // try to find a button wired to our refresh debug wrapper
-    let refreshBtn = document.querySelector('button[onclick="refreshFileListDebug()"]');
+    let refreshBtn = document.querySelector('button[data-old-onclick*="refreshFileListDebug("]') || document.querySelector('button[onclick="refreshFileListDebug()"]');
     if (!refreshBtn) refreshBtn = Array.from(document.querySelectorAll('button')).find(b => /refresh/i.test(b.textContent || '') );
     if (!refreshBtn) { console.error('‚ùå [DEBUG] setupRefreshButton: Refresh button not found'); return; }
     if (refreshBtn.dataset.debugBound === '1') return;
--- Diff: webui/templates/index.html (backup vs current) ---
--- webui/templates/index.html.bak.20251109_134405	2025-11-09 13:40:06.383392690 +0800
+++ webui/templates/index.html	2025-11-09 13:44:05.150554483 +0800
@@ -592,8 +592,8 @@
                         </div>
                     </div>
                     <div class="spectrum-scan-buttons">
-                        <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" onclick="startSpectrumScan()">Start Scan</button>
-                        <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" onclick="stopSpectrumScan()">Stop Scan</button>
+                        <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" data-old-onclick="startSpectrumScan()">Start Scan</button>
+                        <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" data-old-onclick="stopSpectrumScan()">Stop Scan</button>
                     </div>
                 </form>
             </div>
@@ -979,8 +979,8 @@
                 <div class="panel-header">
                     <h3>üìä File Preview</h3>
                     <div>
-                        <button class="btn btn-sm" data-action="close-preview" onclick="rptUI.closePreview()">Close</button>
-                        <button class="btn btn-sm btn-primary" data-action="analyze-preview" onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
+                        <button class="btn btn-sm" data-action="close-preview" data-old-onclick="rptUI.closePreview()">Close</button>
+                        <button class="btn btn-sm btn-primary" data-action="analyze-preview" data-old-onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
                     </div>
                 </div>
                 <div class="compact-form">
--- Diff: webui/templates/index-new-bak2.html (backup vs current) ---
--- webui/templates/index-new-bak2.html.bak.20251109_054554	2025-11-09 13:44:05.178372693 +0800
+++ webui/templates/index-new-bak2.html	2025-11-09 13:45:54.764930355 +0800
@@ -793,7 +793,7 @@
                 </div>
                 <div class="file-actions">
                     <input type="file" id="fileInput" accept=".h5,.dat,.complex,.raw,.bin,.wav,.csv,.npy" multiple style="display: none;">
-                    <button onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
+                    <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()"  class="btn btn-primary">Upload Files</button>
                     <button onclick="refreshFileListDebug()" class="btn">Refresh List</button>
                     <button onclick="rptUI.clearAllPlots()" class="btn">Clear Plots</button>
                     <button onclick="rptUI.deleteAllFiles()" class="btn">Delete All</button>
--- Diff: webui/templates/index-new-bak2.html (backup vs current) ---
--- webui/templates/index-new-bak2.html.bak.20251109_134405	2025-11-09 13:40:44.706089171 +0800
+++ webui/templates/index-new-bak2.html	2025-11-09 13:45:54.764930355 +0800
@@ -525,8 +525,8 @@
                     <div class="spectrum-scan-buttons">
                         <button type="button" class="btn btn-primary" id="start-scan-btn" onclick="startSpectrumScan()">Start Scan</button>
                         <button type="button" class="btn" id="stop-scan-btn" onclick="stopSpectrumScan()">Stop Scan</button>
-                           <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" onclick="startSpectrumScan()">Start Scan</button>
-                           <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" onclick="stopSpectrumScan()">Stop Scan</button>
+                           <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" data-old-onclick="startSpectrumScan()">Start Scan</button>
+                           <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" data-old-onclick="stopSpectrumScan()">Stop Scan</button>
                     </div>
                 </form>
             </div>
@@ -793,7 +793,7 @@
                 </div>
                 <div class="file-actions">
                     <input type="file" id="fileInput" accept=".h5,.dat,.complex,.raw,.bin,.wav,.csv,.npy" multiple style="display: none;">
-                    <button onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
+                    <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()"  class="btn btn-primary">Upload Files</button>
                     <button onclick="refreshFileListDebug()" class="btn">Refresh List</button>
                     <button onclick="rptUI.clearAllPlots()" class="btn">Clear Plots</button>
                     <button onclick="rptUI.deleteAllFiles()" class="btn">Delete All</button>
@@ -918,8 +918,8 @@
                     <div>
                         <button class="btn btn-sm" onclick="rptUI.closePreview()">Close</button>
                         <button class="btn btn-sm btn-primary" onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
-                           <button class="btn btn-sm" data-action="close-preview" onclick="rptUI.closePreview()">Close</button>
-                           <button class="btn btn-sm btn-primary" data-action="analyze-preview" onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
+                           <button class="btn btn-sm" data-action="close-preview" data-old-onclick="rptUI.closePreview()">Close</button>
+                           <button class="btn btn-sm btn-primary" data-action="analyze-preview" data-old-onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
                     </div>
                 </div>
                 <div class="compact-form">
--- Diff: webui/templates/index-new-bak.html (backup vs current) ---
--- webui/templates/index-new-bak.html.bak.20251109_054554	2025-11-09 13:44:05.172945485 +0800
+++ webui/templates/index-new-bak.html	2025-11-09 13:45:54.764080264 +0800
@@ -664,7 +664,7 @@
                 </div>
                 <div class="file-actions">
                     <input type="file" id="fileInput" accept=".h5,.dat,.complex,.raw,.bin,.wav,.csv,.npy" multiple style="display: none;">
-                    <button onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
+                    <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()"  class="btn btn-primary">Upload Files</button>
                        <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
                        <button data-action="refresh-list" data-old-onclick="refreshFileListDebug()" class="btn">Refresh List</button>
                        <button data-action="clear-plots" data-old-onclick="rptUI.clearAllPlots()" class="btn">Clear Plots</button>
--- Diff: webui/templates/index-new-bak.html (backup vs current) ---
--- webui/templates/index-new-bak.html.bak.20251109_134405	2025-11-09 13:40:25.430219303 +0800
+++ webui/templates/index-new-bak.html	2025-11-09 13:45:54.764080264 +0800
@@ -396,8 +396,8 @@
                     </div>
                     <div class="spectrum-scan-buttons">
                         <button type="button" class="btn btn-primary" id="start-scan-btn" onclick="startSpectrumScan()">Start Scan</button>
-                           <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" onclick="startSpectrumScan()">Start Scan</button>
-                           <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" onclick="stopSpectrumScan()">Stop Scan</button>
+                           <button type="button" class="btn btn-primary" id="start-scan-btn" data-action="start-scan" data-old-onclick="startSpectrumScan()">Start Scan</button>
+                           <button type="button" class="btn" id="stop-scan-btn" data-action="stop-scan" data-old-onclick="stopSpectrumScan()">Stop Scan</button>
                     </div>
                 </form>
             </div>
@@ -664,7 +664,7 @@
                 </div>
                 <div class="file-actions">
                     <input type="file" id="fileInput" accept=".h5,.dat,.complex,.raw,.bin,.wav,.csv,.npy" multiple style="display: none;">
-                    <button onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
+                    <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()"  class="btn btn-primary">Upload Files</button>
                        <button data-action="upload-files" data-old-onclick="document.getElementById('fileInput').click()" class="btn btn-primary">Upload Files</button>
                        <button data-action="refresh-list" data-old-onclick="refreshFileListDebug()" class="btn">Refresh List</button>
                        <button data-action="clear-plots" data-old-onclick="rptUI.clearAllPlots()" class="btn">Clear Plots</button>
@@ -784,8 +784,8 @@
                 <div class="panel-header">
                     <h3>üìä File Preview</h3>
                     <div>
-                           <button class="btn btn-sm" data-action="close-preview" onclick="rptUI.closePreview()">Close</button>
-                           <button class="btn btn-sm btn-primary" data-action="analyze-preview" onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
+                           <button class="btn btn-sm" data-action="close-preview" data-old-onclick="rptUI.closePreview()">Close</button>
+                           <button class="btn btn-sm btn-primary" data-action="analyze-preview" data-old-onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
                     </div>
                 </div>
                 <div class="compact-form">
--- Diff: webui/templates/index-old.html (backup vs current) ---
--- webui/templates/index-old.html.bak.20251109_134405	2025-11-09 13:40:17.072277906 +0800
+++ webui/templates/index-old.html	2025-11-09 13:44:05.163757648 +0800
@@ -113,8 +113,8 @@
                     <div class="spectrum-scan-controls">
                         <span id="scanStatus" class="badge bg-info">Â∞±Áª™</span>
                         <div class="preset-info" id="scanPresetSummary">SR -- ‚Ä¢ RBW -- ‚Ä¢ Span -- ‚Ä¢ FFT -- ‚Ä¢ Seg -- ‚Ä¢ Window --</div>
-                        <button type="button" class="btn btn-primary btn-sm" id="start-scan-btn" data-action="start-scan" onclick="startSpectrumScan()">ÂºÄÂßãÊâ´Êèè</button>
-                        <button type="button" class="btn btn-danger btn-sm" id="stop-scan-btn" data-action="stop-scan" onclick="stopSpectrumScan()">ÂÅúÊ≠¢Êâ´Êèè</button>
+                        <button type="button" class="btn btn-primary btn-sm" id="start-scan-btn" data-action="start-scan" data-old-onclick="startSpectrumScan()">ÂºÄÂßãÊâ´Êèè</button>
+                        <button type="button" class="btn btn-danger btn-sm" id="stop-scan-btn" data-action="stop-scan" data-old-onclick="stopSpectrumScan()">ÂÅúÊ≠¢Êâ´Êèè</button>
                     </div>
                 </div>
                 <form id="spectrumScanForm" class="spectrum-scan-form" onsubmit="event.preventDefault(); startSpectrumScan();">
@@ -418,8 +418,8 @@
                 <div class="panel-header">
                     <h3>üìä File Preview</h3>
                     <div>
-                        <button class="btn btn-sm btn-secondary" data-action="close-preview" onclick="rptUI.closePreview()">Close</button>
-                        <button class="btn btn-sm btn-primary" data-action="analyze-preview" onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
+                        <button class="btn btn-sm btn-secondary" data-action="close-preview" data-old-onclick="rptUI.closePreview()">Close</button>
+                        <button class="btn btn-sm btn-primary" data-action="analyze-preview" data-old-onclick="rptUI.analyzeFromPreview()">Full Analysis</button>
                     </div>
                 </div>
                 </div>
